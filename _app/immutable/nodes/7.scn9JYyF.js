var At=t=>{throw TypeError(t)};var Pt=(t,e,n)=>e.has(t)||At("Cannot "+n);var lt=(t,e,n)=>(Pt(t,e,"read from private field"),n?n.call(t):e.get(t)),ct=(t,e,n)=>e.has(t)?At("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),dt=(t,e,n,o)=>(Pt(t,e,"write to private field"),o?o.call(t,n):e.set(t,n),n);import{t as L,a as j,e as tt}from"../chunks/LL2SOGQe.js";import{aE as se,b as Qt,aF as Gt,e as ne,ay as oe,s as ht,aK as ie,g as s,M as le,aI as ce,al as de,Z as M,aq as ut,a0 as K,am as ue,aL as fe,_ as T,aw as ve,$ as z,aJ as g}from"../chunks/5Iq7L8_k.js";import{s as V}from"../chunks/BXT7aIDr.js";import{p as me,i as I}from"../chunks/JXL9SwVS.js";import{e as et,i as pe}from"../chunks/BoV8GbCI.js";import{h as be}from"../chunks/CX-QXmVf.js";import{s as Z,r as ye,b as zt,a as St}from"../chunks/DrYBP693.js";import{o as he,d as ge,e as _e}from"../chunks/CgNUgdGO.js";import{c as we}from"../chunks/X5Sv9yWS.js";import{i as xe,a as ke,b as je,c as Ae}from"../chunks/5XAUgP7Z.js";function Et(t,e,n){se(()=>{var o=Qt(()=>e(t,n==null?void 0:n())||{});if(n&&(o!=null&&o.update)){var i=!1,m={};Gt(()=>{var u=n();ne(u),i&&oe(m,u)&&(m=u,o.update(u))}),i=!0}if(o!=null&&o.destroy)return()=>o.destroy()})}function Pe(t){ht(t,t.v+1)}function ze(t){let e=0,n=le(0),o;return()=>{ie()&&(s(n),Gt(()=>(e===0&&(o=Qt(()=>t(()=>Pe(n)))),e+=1,()=>{ce().then(()=>{e-=1,e===0&&(o==null||o(),o=void 0)})})))}}function Se(t){const e=JSON.parse(t);return e.data&&(e.data=je(e.data,Ae.decoders)),e}function ft(t){return HTMLElement.prototype.cloneNode.call(t)}function vt(t,e=()=>{}){const n=async({action:i,result:m,reset:u=!0,invalidateAll:p=!0})=>{m.type==="success"&&(u&&HTMLFormElement.prototype.reset.call(t),p&&await xe()),(location.origin+location.pathname===i.origin+i.pathname||m.type==="redirect"||m.type==="error")&&await ke(m)};async function o(i){var D,O,H,q,d;if(((D=i.submitter)!=null&&D.hasAttribute("formmethod")?i.submitter.formMethod:ft(t).method)!=="post")return;i.preventDefault();const u=new URL((O=i.submitter)!=null&&O.hasAttribute("formaction")?i.submitter.formAction:ft(t).action),p=(H=i.submitter)!=null&&H.hasAttribute("formenctype")?i.submitter.formEnctype:ft(t).enctype,_=new FormData(t),C=(q=i.submitter)==null?void 0:q.getAttribute("name");C&&_.append(C,((d=i.submitter)==null?void 0:d.getAttribute("value"))??"");const N=new AbortController;let F=!1;const S=await e({action:u,cancel:()=>F=!0,controller:N,formData:_,formElement:t,submitter:i.submitter})??n;if(F)return;let w;try{const l=new Headers({accept:"application/json","x-sveltekit-action":"true"});p!=="multipart/form-data"&&l.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(p)?p:"application/x-www-form-urlencoded");const P=p==="multipart/form-data"?_:new URLSearchParams(_),r=await fetch(u,{method:"POST",headers:l,cache:"no-store",body:P,signal:N.signal});w=Se(await r.text()),w.type==="error"&&(w.status=r.status)}catch(l){if((l==null?void 0:l.name)==="AbortError")return;w={type:"error",error:l}}await S({action:u,formData:_,formElement:t,update:l=>n({action:u,result:w,reset:l==null?void 0:l.reset,invalidateAll:l==null?void 0:l.invalidateAll}),result:w})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",o),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",o)}}}var Mt="mz3PUW_p",Wt=["#FFC700","#FF0000","#2E3191","#41BBC7"],Lt=3500,Ut=.5,Ht=150,Tt="mix",Ct=12,Ft="",Dt=!0,Nt=800,Ot=1600;function mt(t,e={}){let{colors:n=Wt,duration:o=Lt,force:i=Ut,particleCount:m=Ht,particleShape:u=Tt,particleSize:p=Ct,particleClass:_=Ft,destroyAfterDone:C=Dt,stageHeight:N=Nt,stageWidth:F=Ot}=e;(function(d){if(document.querySelector("style[data-neoconfetti]"))return;const l=pt("style");l.dataset.neoconfetti="",l.textContent=d,bt(document.head,l)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),t.classList.add("mz3PUW_c"),t.style.setProperty("--sh",N+"px");let U=[],S=[];const w=()=>X(W()*(Ue-1)),D=(d,l)=>u!=="rectangles"&&(d==="circles"||He(l));function O(d,l){const P=w(),r=D(u,P),a=(b,h)=>d.style.setProperty(b,h+"");a("--xlp",yt(at(Rt(l,90)-180),0,180,-F/2,F/2)+"px"),a("--dc",o-X(1e3*W())+"ms");const c=W()<Me?Q(W()*We,2):0;a("--x1",c),a("--x2",-1*c),a("--x3",c),a("--x4",Q(at(yt(at(Rt(l,90)-180),0,180,-1,1)),4)),a("--y1",Q(W()*Jt,4)),a("--y2",Q(W()*i*(Vt()?1:-1),4)),a("--y3",Jt),a("--y4",Q(Le(yt(at(l-180),0,180,i,-i),0),4)),a("--w",(r?p:X(4*W())+p/2)+"px"),a("--h",(r?p:X(2*W())+p)+"px");const f=P.toString(2).padStart(3,"0").split("");a("--hr",f.map(b=>+b/2+"").join(" ")),a("--r",f.join(" ")),a("--rd",Q(W()*(Ee-qt)+qt)+"ms"),a("--br",r?"50%":0)}let H;function q(){t.innerHTML="",clearTimeout(H),U=Kt(m,n),S=function(d,l=[],P){const r=[];for(const{color:a}of l){const c=pt("div");c.className=`${Mt} ${P}`,c.style.setProperty("--bgc",a);const f=pt("div");bt(c,f),bt(d,c),r.push(c)}return r}(t,U,_);for(const[d,l]of Bt(S))O(l,U[+d].degree);H=setTimeout(()=>{C&&(t.innerHTML="")},o)}return q(),{update(d){const l=d.particleCount??Ht,P=d.particleShape??Tt,r=d.particleSize??Ct,a=d.particleClass??Ft,c=d.colors??Wt,f=d.stageHeight??Nt,b=d.duration??Lt,h=d.force??Ut,v=d.stageWidth??Ot,E=d.destroyAfterDone??Dt;U=Kt(l,c);let x=!1;if(l===m){S=Array.from(t.querySelectorAll(`.${Mt}`));for(const[J,{color:A}]of Bt(U)){const y=S[+J];JSON.stringify(n)!==JSON.stringify(c)&&y.style.setProperty("--bgc",A),P!==u&&y.style.setProperty("--br",D(P,w())?"50%":"0"),a!==_&&(_&&y.classList.remove(_),a&&y.classList.add(a))}}else x=!0;C&&!E&&clearTimeout(H),t.style.setProperty("--sh",f+"px"),o=b,n=c,i=h,m=l,u=P,p=r,_=a,C=E,N=f,F=v,x&&q()},destroy(){t.innerHTML="",clearTimeout(H)}}}var qt=200,Ee=800,Me=.1,We=.3,Jt=.5,at=Math.abs,W=Math.random,X=Math.round,Le=Math.max,pt=t=>document.createElement(t),bt=(t,e)=>t.appendChild(e),Kt=(t,e)=>Array.from({length:t},(n,o)=>({color:e[o%e.length],degree:360*o/t})),Q=(t,e=2)=>X((t+Number.EPSILON)*10**e)/10**e,yt=(t,e,n,o,i)=>(t-e)*(i-o)/(n-e)+o,Rt=(t,e)=>t+e>360?t+e-360:t+e,Vt=()=>W()>.5,Bt=Object.entries,Ue=6,He=t=>t!==1&&Vt(),Y,$;class Te{constructor(e,n){ct(this,Y);ct(this,$);dt(this,Y,e),dt(this,$,ze(n))}get current(){return lt(this,$).call(this),lt(this,Y).call(this)}}Y=new WeakMap,$=new WeakMap;const Ce=/\(.+\)/,Fe=new Set(["all","print","screen","and","or","not","only"]);class De extends Te{constructor(e,n){let o=Ce.test(e)||e.split(/[\s,]+/).some(m=>Fe.has(m.trim()))?e:`(${e})`;const i=window.matchMedia(o);super(()=>i.matches,m=>he(i,"change",m))}}function It(t,e,n){var i;t.preventDefault();const o=t.target.getAttribute("data-key");o==="backspace"?(ht(e,s(e).slice(0,-1),!0),(i=n())!=null&&i.badGuess&&n(n().badGuess=!1,!0)):s(e).length<5&&ht(e,s(e)+o)}var Ne=L('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l">'),Oe=L('<div> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"></div>'),qe=L('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div></div>',1),Je=L('<p class="svelte-1pg2j5l"> </p>'),Ke=L('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),Re=L('<button formaction="?/update" name="key"> </button>'),Be=L('<div class="row svelte-1pg2j5l"></div>'),Ie=L('<div class="keyboard svelte-1pg2j5l"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),Qe=L('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),Ge=L('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function oa(t,e){de(e,!0);let n=me(e,"form",15);const o=new De("(prefers-reduced-motion: reduce)");let i=g(()=>e.data.answers.at(-1)==="xxxxx"),m=g(()=>s(i)?-1:e.data.answers.length),u=g(()=>e.data.guesses[s(m)]||""),p=g(()=>s(u).length===5);const _=g(()=>{let r={},a={};return e.data.answers.forEach((c,f)=>{const b=e.data.guesses[f];for(let h=0;h<5;h+=1){const v=b[h];c[h]==="x"?(r[v]="exact",a[v]="correct"):r[v]||(r[v]=c[h]==="c"?"close":"missing",a[v]=c[h]==="c"?"present":"absent")}}),{classnames:r,description:a}}),C=g(()=>{let{classnames:r,description:a}=s(_);return r}),N=g(()=>{let{classnames:r,description:a}=s(_);return a});function F(r){var a;r.metaKey||r.key==="Enter"&&!s(p)||(a=document.querySelector(`[data-key="${r.key}" i]`))==null||a.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var U=Ge();_e("keydown",fe,F),be(r=>{var a=Ne();ve.title="Sverdle",j(r,a)});var S=M(ut(U),2),w=M(T(S),2);let D;et(w,20,()=>Array.from(Array(6).keys()),r=>r,(r,a)=>{var c=qe();const f=g(()=>a===s(m));var b=ut(c),h=T(b);z(b);var v=M(b,2);let E;et(v,20,()=>Array.from(Array(5).keys()),x=>x,(x,J)=>{var A=Oe();const y=g(()=>s(f)?s(u):e.data.guesses[a]),G=g(()=>{var k;return(k=e.data.answers[a])==null?void 0:k[J]}),gt=g(()=>{var k;return((k=s(y))==null?void 0:k[J])??""}),Zt=g(()=>s(f)&&J===s(y).length),_t=g(()=>s(G)==="x"),wt=g(()=>s(G)==="c"),xt=g(()=>s(G)==="_");let kt;var jt=T(A),rt=M(jt),Xt=T(rt);{var Yt=k=>{var nt=tt("(correct)");j(k,nt)},$t=(k,nt)=>{{var te=R=>{var ot=tt("(present)");j(R,ot)},ee=(R,ot)=>{{var ae=B=>{var it=tt("(absent)");j(B,it)},re=B=>{var it=tt("empty");j(B,it)};I(R,B=>{s(xt)?B(ae):B(re,!1)},ot)}};I(k,R=>{s(wt)?R(te):R(ee,!1)},nt)}};I(Xt,k=>{s(_t)?k(Yt):k($t,!1)})}z(rt);var st=M(rt,2);ye(st),z(A),K(k=>{kt=Z(A,1,"letter svelte-1pg2j5l",null,kt,k),V(jt,`${s(gt)??""} `),st.disabled=!s(f),zt(st,s(gt))},[()=>({exact:s(_t),close:s(wt),missing:s(xt),selected:s(Zt)})]),j(x,A)}),z(v),K(x=>{V(h,`Row ${a+1}`),E=Z(v,1,"row svelte-1pg2j5l",null,E,x)},[()=>({current:s(f)})]),j(r,c)}),z(w);var O=M(w,2),H=T(O);{var q=r=>{var a=Ke(),c=ut(a);{var f=v=>{var E=Je(),x=T(E);z(E),K(()=>V(x,`the answer was "${e.data.answer??""}"`)),j(v,E)};I(c,v=>{!s(i)&&e.data.answer&&v(f)})}var b=M(c,2),h=T(b);z(b),K(()=>V(h,`${s(i)?"you won :)":"game over :("} play again?`)),j(r,a)},d=r=>{var a=Ie(),c=T(a);let f;var b=M(c,2);b.__click=[It,u,n];var h=M(b,2);et(h,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],v=>v,(v,E)=>{var x=Be();et(x,21,()=>E,pe,(J,A)=>{var y=Re();y.__click=[It,u,n];var G=T(y,!0);z(y),K(()=>{St(y,"data-key",s(A)),Z(y,1,we(s(C)[s(A)]),"svelte-1pg2j5l"),y.disabled=s(p),zt(y,s(A)),St(y,"aria-label",`${s(A)??""} ${(s(N)[s(A)]||"")??""}`),V(G,s(A))}),j(J,y)}),z(x),j(v,x)}),z(a),K(v=>{c.disabled=!s(p),f=Z(c,1,"svelte-1pg2j5l",null,f,v)},[()=>({selected:s(p)})]),j(r,a)};I(H,r=>{s(i)||e.data.answers.length>=6?r(q):r(d,!1)})}z(O),z(S),Et(S,(r,a)=>vt==null?void 0:vt(r,a),()=>()=>({update:r})=>{r({reset:!1})});var l=M(S,2);{var P=r=>{var a=Qe();Et(a,(c,f)=>mt==null?void 0:mt(c,f),()=>({particleCount:o.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),j(r,a)};I(l,r=>{s(i)&&r(P)})}K(r=>D=Z(w,1,"grid svelte-1pg2j5l",null,D,r),[()=>{var r;return{playing:!s(i),"bad-guess":(r=n())==null?void 0:r.badGuess}}]),j(t,U),ue()}ge(["click"]);export{oa as component};
